@(myForm: Form[ChatData])(implicit request: RequestHeader, messages: Messages, session: Session)

@import play.filters.csrf.CSRF
@token = @{ CSRF.getToken.get }

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='@routes.Assets.versioned("lib/bootstrap/dist/css/bootstrap.min.css")'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.css">
    <link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/chat.css")'>
    <link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/keyboard.css")'>
    <link rel="shortcut icon" type="image/png" href='@routes.Assets.versioned("images/favicon.png")'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Chat Room</title>
</head>

<body ng-app="sseChat">
    <div class="main-section" ng-controller="ChatCtrl">
        <div class="container">
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand">Hello @request.session.get("connected")</a>
                    </div>
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">Chat</a></li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown">Notifications
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li>
                                    <img src="https://s3.postimg.org/yf86x7z1r/img2.jpg" alt="">
                                    <p>LMT has sent you a friend request</p>
                                    <i class="fa fa-check-circle-o fa-2x" aria-hidden="true"></i>
                                    <i class="fa fa-times-circle-o fa-2x" aria-hidden="true"></i>
                                </li>
                                <li>
                                    <img src="https://s3.postimg.org/yf86x7z1r/img2.jpg" alt="">
                                    <p>LMT ran away.</p>
                                    <i class="fa fa-check-circle-o fa-2x" aria-hidden="true"></i>
                                    <i class="fa fa-times-circle-o fa-2x" aria-hidden="true"></i>
                                </li>
                                <li>
                                    <img src="https://s3.postimg.org/yf86x7z1r/img2.jpg" alt="">
                                    <p>A wild LMT appears!</p>
                                    <i class="fa fa-check-circle-o fa-2x" aria-hidden="true"></i>
                                    <i class="fa fa-times-circle-o fa-2x" aria-hidden="true"></i>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <form class="navbar-form navbar-left">
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button class="btn btn-default" type="submit">
                                    <i class="glyphicon glyphicon-user"></i>
                                </button>
                            </div>
                            <input type="text" class="form-control" placeholder="Add friend">
                        </div>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Log out</a></li>
                    </ul>
                </div>
            </nav>
            <div class="chat-container">
                <div class="col-sm-3 char-sidebar">
                    <div class="row">
                        <div id="custom-search-input">
                            <div class="input-group col-md-12">
                                <input type="text" class="search-query form-control" placeholder="Search conversation"/>
                                <button class="btn btn-danger" type="button">
                                    <span class="glyphicon glyphicon-search"></span>
                                </button>
                            </div>
                        </div>
                        <div class="dropdown all-conversation">
                            <button class="dropdown-toggle" type="button" id="dropdownMenu2"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-weixin" aria-hidden="true"></i>
                                All Conversations
                                <span class="caret pull-right"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                <li><a href="#"> All Conversation </a>  <ul class="sub-menu list-unstyled">
                                    <li><a href="#"> All Conversation </a> </li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li><a href="#">Separated link</a></li>
                                </ul>
                                </li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li><a href="#">Separated link</a></li>
                            </ul>
                        </div>
                        <div class="member-list">
                            <ul class="list-unstyled">
                                <li class="left clearfix" ng-repeat="r in rooms"
                                data-chat="room{{$index+1}}" ng-click="setCurrentRoom(r)">
                                    <span class="chat-img pull-left">
                                        <img src='@routes.Assets.versioned("images/conversation.jpeg")'
                                        alt="User Avatar" class="img-circle">
                                    </span>
                                    <div class="chat-body clearfix">
                                        <div class="header_sec">
                                            <strong class="primary-font">Pucca</strong> <strong class="pull-right ">
                                            09:45AM</strong>
                                        </div>
                                        <div class="contact_sec">
                                            <strong class="primary-font">(123) 123-456</strong>
                                            <span class="badge pull-right">3</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-sm-9 message-section">
                    <div class="row">
                        <div class="new-message-head">
                            <div class="pull-left" id="new-conversation">
                                <button><i class="fa fa-plus-square-o" aria-hidden="true"></i>
                                    New Conversation
                                </button>
                            </div>
                            <div class="pull-right">
                                <div class="dropdown">
                                    <button class="dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-cogs" aria-hidden="true"></i> Setting
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                        <li><a href="/logout">Log out</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="chat-area" ng-repeat="r in rooms" data-chat="room{{$index+1}}">
                            <ul class="list-unstyled" id="chat-list">
                                <li class="left clearfix {{msg.who}}" ng-repeat="msg in msgs">
                                    <span class="chat-img1 pull-left">
                                        <img src="https://s3.postimg.org/yf86x7z1r/img2.jpg"
                                        alt="User Avatar" class="img-circle">
                                    </span>
                                    <div class="chat-body1 clearfix">
                                        <p ng-if="msg.link">
                                            <a href="{{msg.link}}">{{msg.fileName}}</a>
                                        </p>
                                        <p ng-if="msg.text">
                                            {{msg.text}}
                                        </p>
                                        <div class="chat-time pull-right">09:40PM</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="message-write">
                            <div class="checkbox pull-left">
                                <label><input type="checkbox" id="typeMath">Type math</label>
                            </div>
                            <form enctype="multipart/form-data">
                                <button class="pull-right btn btn-primary" type="file"
                                ngf-select="uploadFiles($file, $invalidFiles)" multiple>
                                    <i class="fa fa-cloud-upload" aria-hidden="true"></i> Add Files
                                </button>
                            </form>
                            <div id="input-area">
                                <form ng-submit="submitMsg()">
                                    <input type="hidden" name="@token.name" id="csrfToken" value="@token.value" />
                                    <input type="text" name="chat" ng-model="inputText"
                                    class="form-control ng-pristine ng-valid input-block-level"
                                    placeholder="Type a message" id="input-box">
                                    <div id="mathquill" class="input-field ng-pristine ng-valid input-block-level">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
@keyboard()

    <!-- External libraries -->
    <script src="https://use.fontawesome.com/baccb63e5b.js"></script>
    <script type='text/javascript' src='@routes.Assets.versioned("lib/jquery/jquery.min.js")'></script>
    <script type='text/javascript' src='@routes.Assets.versioned("lib/bootstrap/dist/js/bootstrap.min.js")'></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML"></script>
    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/lib/eventsource.js")'></script>
    <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>
    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/lib/ng-file-upload.min.js")'></script>
    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/lib/ng-file-upload-shim.min.js")'></script>
    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/lib/notify.min.js")'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/virtual-keyboard/1.26.18/js/jquery.keyboard.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0-rc.2/jquery-ui.min.js"></script>

    <!-- Angular -->
    <script src='@routes.Assets.versioned("javascripts/app.js")'></script>
    <script src='@routes.Assets.versioned("javascripts/services.js")'></script>
    <script src='@routes.Assets.versioned("javascripts/controllers.js")'></script>
    <script src='@routes.Assets.versioned("javascripts/main.js")'></script>
</body>

</html>