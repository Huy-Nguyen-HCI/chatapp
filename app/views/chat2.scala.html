@(myForm: Form[ChatData])(implicit request: RequestHeader, messages: Messages, session: Session)

@import play.filters.csrf.CSRF
@token = @{ CSRF.getToken.get }

<!DOCTYPE html>

<html>
<head>
    <title>Chat room</title>
    <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/chat2.css")">
    <link rel='stylesheet' href='@routes.Assets.versioned("lib/bootstrap/dist/css/bootstrap.min.css")'>

    <script src='@routes.Assets.versioned("lib/jquery/dist/jquery.min.js")' type="text/javascript"></script>

    <script src='@routes.Assets.versioned("javascripts/eventsource.js")'></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-cookies.js"></script>
    <script src='@routes.Assets.versioned("javascripts/app.js")'></script>
    <script src='@routes.Assets.versioned("javascripts/services.js")'></script>
    <script src='@routes.Assets.versioned("javascripts/controllers.js")'></script>

</head>
<body ng-app="sseChat">

<div ng-controller="ChatCtrl">
    <div id="header">
        Your Name: <input type="text" name="user" id="userField" value="John Doe" ng-model="user" />
        <select ng-model="currentRoom" ng-change="setCurrentRoom(currentRoom)"
                ng-options="r.name for r in rooms" id="roomSelect"></select>
    </div>

    <div id="chat">
        <div class="{{msg.who}} msg" ng-repeat="msg in msgs | limitTo:-4"
             ng-class="msg.user === 'Juliet' ? 'juliet' : msg.user !== user ? 'others' : ''">{{msg.time}}<br/>
            <strong>{{msg.user}} says: </strong>{{msg.text}}<br/>
        </div>
    </div>

    <div id="footer">
        <form ng-submit="submitMsg()">
            <input type="hidden" name="@token.name" id="csrfToken" value="@token.value" />
            <input type="text" name="chat" id="textField" ng-model="inputText"
                   placeholder="Say something" class="ng-pristine ng-valid input-block-level" />
            <input type="button" class="btn btn-primary" id="saySomething" value="Submit" />
        </form>
    </div>

    <div></div>
</div>
</body>
</html>
